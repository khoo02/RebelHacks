/* ── RESET & ROOT ─────────────────── */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg: #0a0f0a;
  --felt: #0d2010;
  --felt-mid: #102812;
  --gold: #c9a84c;
  --gold-dim: rgba(201,168,76,0.35);
  --red: #c0392b;
  --green: #27ae60;
  --card-bg: #fdf8ee;
  --text: #e8dfc8;
  --text-dim: rgba(232,223,200,0.55);
  --border: rgba(201,168,76,0.3);
  --hud-bg: rgba(5,8,5,0.92);
  --debt-col: #e74c3c;
  --win-col: #2ecc71;
}

body {
  background: var(--bg);
  font-family: 'Crimson Text', serif;
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
  background-image:
    radial-gradient(ellipse at 50% 50%, rgba(13,32,16,0.9) 0%, rgba(10,15,10,1) 100%),
    repeating-linear-gradient(0deg, transparent, transparent 40px, rgba(201,168,76,0.015) 40px, rgba(201,168,76,0.015) 41px),
    repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(201,168,76,0.015) 40px, rgba(201,168,76,0.015) 41px);
}

/* ── ANTI-GAMBLING HUD ────────────── */
#ag-hud {
  position: sticky;
  top: 0;
  z-index: 200;
  display: flex;
  background: var(--hud-bg);
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(8px);
}

.ag-block {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0.45rem 0.4rem;
  border-right: 1px solid rgba(201,168,76,0.08);
  gap: 0.1rem;
}
.ag-block:last-child { border-right: none; }

.ag-lbl {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.42rem;
  letter-spacing: 0.18em;
  color: var(--text-dim);
}

.ag-val {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.82rem;
  color: var(--text);
  font-variant-numeric: tabular-nums;
}

#hud-timer.warn-orange { color: #e67e22; }
#hud-timer.warn-red    { color: var(--debt-col); text-shadow: 0 0 8px rgba(231,76,60,0.5); }
#hud-debt.in-debt      { color: var(--debt-col); }
#hud-debt.in-profit    { color: var(--win-col); }
#hud-winrate.losing    { color: var(--debt-col); }
#hud-winrate.winning   { color: var(--win-col); }

.hud-house { font-size: 0.68rem !important; color: var(--text-dim) !important; }

/* ── STREAK / TIME BANNERS ─────────── */
.ag-banner {
  padding: 0.45rem 1rem;
  font-size: 0.82rem;
  font-style: italic;
  text-align: center;
  border-bottom: 1px solid;
  display: none;
}
.ag-banner.show { display: block; }
.ag-banner.streak {
  background: rgba(192,57,43,0.1);
  border-color: rgba(192,57,43,0.35);
  color: #e8b4af;
}
.ag-banner.time-warn {
  background: rgba(230,126,34,0.1);
  border-color: rgba(230,126,34,0.3);
  color: #f0c080;
}

/* ── LAYOUT ───────────────────────── */
#game-wrap {
  display: flex;
  flex-direction: column;
  min-height: calc(100vh - 48px);
  max-width: 760px;
  margin: 0 auto;
  padding: 0 1rem;
}

/* ── DEALER ZONE ──────────────────── */
#dealer-zone {
  padding: 1.5rem 0 1rem;
}

.zone-label {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.6rem;
  letter-spacing: 0.2em;
  color: var(--text-dim);
  margin-bottom: 0.6rem;
}

.hand-score {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 1rem;
  margin-bottom: 0.5rem;
  min-height: 1.4rem;
  color: var(--gold);
}

/* ── CARD ROW ─────────────────────── */
.card-row {
  display: flex;
  gap: 0.6rem;
  flex-wrap: wrap;
  min-height: 110px;
  align-items: flex-end;
}

/* ── CARDS ────────────────────────── */
.card {
  width: 72px;
  height: 104px;
  border-radius: 7px;
  flex-shrink: 0;
}

.card-inner {
  width: 100%;
  height: 100%;
  border-radius: 7px;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.45s ease;
}

.card.flip .card-inner { animation: flipCard 0.45s ease forwards; }
@keyframes flipCard {
  0%   { transform: rotateY(0); }
  50%  { transform: rotateY(90deg); }
  100% { transform: rotateY(0); }
}

.card-face, .card-back {
  position: absolute;
  inset: 0;
  border-radius: 7px;
  backface-visibility: hidden;
}

.card-face {
  background: var(--card-bg);
  border: 1.5px solid rgba(0,0,0,0.12);
  box-shadow: 0 3px 12px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.9);
  display: flex;
  flex-direction: column;
  padding: 4px;
  animation: dealIn 0.35s cubic-bezier(0.175,0.885,0.32,1.275) forwards;
}

.card-back {
  background: linear-gradient(135deg, #0d2010, #1a3a1a);
  border: 1.5px solid rgba(201,168,76,0.5);
  box-shadow: 0 3px 12px rgba(0,0,0,0.5);
  background-image: repeating-linear-gradient(
    45deg,
    rgba(201,168,76,0.04) 0, rgba(201,168,76,0.04) 2px,
    transparent 2px, transparent 10px
  );
  display: flex;
  align-items: center;
  justify-content: center;
  animation: dealIn 0.35s cubic-bezier(0.175,0.885,0.32,1.275) forwards;
}
.card-back::after { content: '♠'; font-size: 2rem; opacity: 0.15; color: var(--gold); }

@keyframes dealIn {
  from { transform: scale(0.6) rotate(-15deg); opacity: 0; }
  to   { transform: scale(1) rotate(0deg); opacity: 1; }
}

.corner { position: absolute; font-size: 0.62rem; font-weight: 700; line-height: 1.1; }
.corner.tl { top: 4px; left: 5px; }
.corner.br { bottom: 4px; right: 5px; transform: rotate(180deg); }
.center-suit { font-size: 1.9rem; margin: auto; }

.red .corner, .red .center-suit { color: #c0392b; }
.black .corner, .black .center-suit { color: #111; }

/* ── DIVIDER ──────────────────────── */
#table-divider {
  border: none;
  border-top: 1px solid var(--border);
  margin: 0.5rem 0;
  opacity: 0.4;
}

/* ── MESSAGE BOX ──────────────────── */
#msg-box {
  padding: 0.7rem 1rem;
  background: rgba(5,8,5,0.7);
  border: 1px solid var(--border);
  border-radius: 6px;
  font-size: 1rem;
  font-style: italic;
  text-align: center;
  min-height: 2.6rem;
  margin: 0.75rem 0;
}

/* ── PLAYER ZONE ──────────────────── */
#player-zone {
  padding: 0.5rem 0 1rem;
}

/* ── BALANCE / BETTING ────────────── */
#bet-row {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin: 0.75rem 0;
  flex-wrap: wrap;
}

.balance-display {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.85rem;
  color: var(--text-dim);
}
.balance-display span { color: var(--gold); }

.chip {
  width: 46px;
  height: 46px;
  border-radius: 50%;
  border: 3px dashed rgba(255,255,255,0.4);
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.6rem;
  cursor: pointer;
  transition: all 0.15s;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  color: white;
  flex-shrink: 0;
}
.chip:hover:not(:disabled) { transform: scale(1.12) translateY(-3px); filter: brightness(1.2); }
.chip:disabled { opacity: 0.3; cursor: not-allowed; transform: none; }

.chip-1   { background: radial-gradient(circle at 35% 35%, #e0e0e0, #888); }
.chip-5   { background: radial-gradient(circle at 35% 35%, #e74c3c, #922b21); }
.chip-25  { background: radial-gradient(circle at 35% 35%, #2ecc71, #1a8a47); }
.chip-100 { background: radial-gradient(circle at 35% 35%, #3498db, #1a5276); }
.chip-500 { background: radial-gradient(circle at 35% 35%, #9b59b6, #5b2c6f); }

#current-bet-display {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.75rem;
  color: var(--text-dim);
  margin-left: auto;
}
#current-bet-display span { color: var(--gold); font-size: 1rem; }

/* ── ACTION BUTTONS ───────────────── */
#action-row {
  display: flex;
  gap: 0.75rem;
  margin-top: 0.75rem;
  flex-wrap: wrap;
}

.btn {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.78rem;
  padding: 0.6rem 1.4rem;
  border: none;
  cursor: pointer;
  letter-spacing: 0.05em;
  border-radius: 4px;
  transition: all 0.15s;
  clip-path: polygon(5px 0%, calc(100% - 5px) 0%, 100% 5px, 100% calc(100% - 5px), calc(100% - 5px) 100%, 5px 100%, 0% calc(100% - 5px), 0% 5px);
}
.btn:disabled { opacity: 0.25; cursor: not-allowed; }
.btn:not(:disabled):hover { transform: scale(1.04); }

.btn-deal   { background: linear-gradient(135deg, #c9a84c, #9a7a2a); color: #0a0f0a; }
.btn-deal:not(:disabled):hover { box-shadow: 0 0 18px rgba(201,168,76,0.5); }

.btn-hit    { background: linear-gradient(135deg, #27ae60, #1a7a40); color: white; }
.btn-hit:not(:disabled):hover { box-shadow: 0 0 18px rgba(39,174,96,0.5); }

.btn-stand  { background: linear-gradient(135deg, #c9a84c, #9a7a2a); color: #0a0f0a; }
.btn-stand:not(:disabled):hover { box-shadow: 0 0 18px rgba(201,168,76,0.5); }

.btn-double { background: linear-gradient(135deg, #8e44ad, #5b2c6f); color: white; }
.btn-double:not(:disabled):hover { box-shadow: 0 0 18px rgba(142,68,173,0.5); }

.btn-clear  { background: rgba(255,255,255,0.06); color: var(--text-dim); border: 1px solid var(--border); }
.btn-back   { background: rgba(255,255,255,0.06); color: var(--text-dim); border: 1px solid var(--border); font-size: 0.7rem; padding: 0.5rem 1rem; }

/* ── DAMAGE FLASH ─────────────────── */
#flash {
  position: fixed; inset: 0; pointer-events: none; z-index: 900;
  opacity: 0; transition: opacity 0.1s;
}

/* ── WIN NUDGE OVERLAY ────────────── */
#win-nudge {
  display: none;
  position: fixed; inset: 0;
  background: rgba(5,8,5,0.88);
  z-index: 700;
  align-items: center;
  justify-content: center;
}
#win-nudge.show { display: flex; }

.nudge-box {
  background: rgba(13,32,16,0.95);
  border: 1px solid var(--gold-dim);
  border-radius: 10px;
  padding: 2rem 2.5rem;
  max-width: 340px;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.6rem;
}
.nudge-title {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 1rem;
  color: var(--gold);
}
.nudge-body { font-size: 0.92rem; font-style: italic; color: var(--text-dim); line-height: 1.6; }
.nudge-dismiss {
  margin-top: 0.5rem;
  background: transparent;
  border: 1px solid var(--gold-dim);
  color: var(--text-dim);
  padding: 0.4rem 1.2rem;
  cursor: pointer;
  border-radius: 4px;
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.6rem;
  letter-spacing: 0.06em;
  transition: all 0.2s;
}
.nudge-dismiss:hover { color: var(--gold); border-color: var(--gold); }

/* ── GAME OVER OVERLAY ────────────── */
#gameover {
  display: none;
  position: fixed; inset: 0;
  background: rgba(5,8,5,0.92);
  z-index: 800;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  padding: 2rem;
  overflow-y: auto;
}
#gameover.show { display: flex; }

#go-title {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 2.5rem;
  margin-bottom: 0.3rem;
}
.go-win  { color: var(--gold); text-shadow: 0 0 30px rgba(201,168,76,0.7); }
.go-lose { color: var(--debt-col); text-shadow: 0 0 30px rgba(231,76,60,0.7); }
.go-push { color: #7f8c8d; }

/* ── SESSION REPORT ───────────────── */
#report {
  background: rgba(13,32,16,0.8);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 1.5rem;
  max-width: 480px;
  width: 100%;
  margin-top: 1.2rem;
}

.report-title {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.68rem;
  letter-spacing: 0.15em;
  color: var(--gold);
  opacity: 0.75;
  text-align: center;
  margin-bottom: 1rem;
}

.report-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.6rem;
  margin-bottom: 1rem;
}

.r-stat {
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(201,168,76,0.1);
  border-radius: 6px;
  padding: 0.55rem 0.75rem;
  text-align: center;
}
.r-stat-lbl {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.48rem;
  letter-spacing: 0.1em;
  color: var(--text-dim);
  margin-bottom: 0.25rem;
}
.r-stat-val {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 1.05rem;
}

.debt-box {
  background: rgba(192,57,43,0.1);
  border: 1px solid rgba(192,57,43,0.3);
  border-radius: 8px;
  padding: 0.9rem;
  text-align: center;
  margin-bottom: 0.75rem;
}
.debt-box.profit {
  background: rgba(46,204,113,0.08);
  border-color: rgba(46,204,113,0.25);
}
.debt-box-lbl {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.5rem;
  letter-spacing: 0.15em;
  color: var(--debt-col);
  margin-bottom: 0.3rem;
}
.debt-box.profit .debt-box-lbl { color: var(--win-col); }
.debt-box-amount {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 2rem;
  color: var(--debt-col);
}
.debt-box.profit .debt-box-amount { color: var(--win-col); }

.could-buy { margin-bottom: 0.75rem; }
.could-buy-title {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.58rem;
  letter-spacing: 0.1em;
  color: var(--text-dim);
  text-align: center;
  margin-bottom: 0.5rem;
}
.buy-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
  justify-content: center;
}
.buy-item {
  background: rgba(201,168,76,0.07);
  border: 1px solid rgba(201,168,76,0.2);
  border-radius: 5px;
  padding: 0.3rem 0.65rem;
  font-size: 0.82rem;
  color: var(--text-dim);
  font-style: italic;
}

.report-reminder {
  font-size: 0.76rem;
  color: var(--text-dim);
  font-style: italic;
  line-height: 1.65;
  text-align: center;
  border-top: 1px solid rgba(201,168,76,0.1);
  padding-top: 0.75rem;
  margin-top: 0.25rem;
}
.helpline {
  display: block;
  margin-top: 0.4rem;
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.55rem;
  letter-spacing: 0.06em;
  color: var(--gold);
  opacity: 0.6;
  text-decoration: none;
}
.helpline:hover { opacity: 1; }

.go-btns {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 1.2rem;
}

.btn-lg {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.9rem;
  padding: 0.75rem 2rem;
  border: none;
  cursor: pointer;
  border-radius: 5px;
  clip-path: polygon(6px 0%, calc(100% - 6px) 0%, 100% 6px, 100% calc(100% - 6px), calc(100% - 6px) 100%, 6px 100%, 0% calc(100% - 6px), 0% 6px);
  transition: all 0.2s;
}
.btn-lg-gold  { background: linear-gradient(135deg, #c9a84c, #9a7a2a); color: #0a0f0a; }
.btn-lg-muted { background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: var(--text-dim); }
.btn-lg:hover { transform: scale(1.04); }

/* Responsive */
@media(max-width:560px) {
  .card { width: 58px; height: 84px; }
  .center-suit { font-size: 1.5rem; }
  .chip { width: 40px; height: 40px; font-size: 0.55rem; }
  #go-title { font-size: 1.8rem; }
  .debt-box-amount { font-size: 1.5rem; }
}

/* ══════════════════════════════════════════
    ODDS TRACKER PANEL
══════════════════════════════════════════ */
#odds-panel {
  background: rgba(5,8,5,0.85);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 0.85rem 1rem;
  margin: 0.5rem 0;
  display: none;
}
#odds-panel.visible { display: block; }

.odds-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0.65rem;
}
.odds-title {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.58rem;
  letter-spacing: 0.15em;
  color: var(--gold);
  opacity: 0.75;
}
.odds-info-btn {
  background: none;
  border: 1px solid var(--gold-dim);
  color: var(--text-dim);
  font-size: 0.65rem;
  width: 18px; height: 18px;
  border-radius: 50%;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.15s;
  flex-shrink: 0;
}
.odds-info-btn:hover { color: var(--gold); border-color: var(--gold); }

.odds-row {
  display: grid;
  grid-template-columns: 90px 1fr 52px;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.45rem;
}
.odds-row:last-of-type { margin-bottom: 0; }

.odds-lbl {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.48rem;
  letter-spacing: 0.08em;
  color: var(--text-dim);
  white-space: nowrap;
}

.odds-bar-track {
  height: 8px;
  background: rgba(255,255,255,0.06);
  border-radius: 4px;
  overflow: hidden;
  position: relative;
}

.odds-bar-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.55s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

/* Perceived = what most players feel; warm amber */
.bar-perceived { background: linear-gradient(90deg, #c9a84c, #e8c46a); }
/* Actual = mathematically derived; cool blue-green */
.bar-actual    { background: linear-gradient(90deg, #1abc9c, #27ae60); }
/* Bust risk = danger red */
.bar-bust      { background: linear-gradient(90deg, #c0392b, #e74c3c); }

.odds-pct {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.72rem;
  text-align: right;
  white-space: nowrap;
}
.pct-perceived { color: #c9a84c; }
.pct-actual    { color: #1abc9c; }
.pct-bust      { color: #e74c3c; }

/* Gap callout */
.odds-gap {
  margin-top: 0.55rem;
  padding: 0.35rem 0.6rem;
  border-radius: 5px;
  font-size: 0.75rem;
  font-style: italic;
  display: none;
  line-height: 1.45;
}
.odds-gap.show { display: block; }
.odds-gap.overconfident {
  background: rgba(192,57,43,0.1);
  border-left: 2px solid rgba(192,57,43,0.5);
  color: #e8b4af;
}
.odds-gap.underconfident {
  background: rgba(201,168,76,0.07);
  border-left: 2px solid rgba(201,168,76,0.3);
  color: var(--text-dim);
}

/* Tooltip overlay */
#odds-tooltip {
  display: none;
  position: fixed;
  inset: 0;
  z-index: 750;
  background: rgba(5,8,5,0.82);
  align-items: center;
  justify-content: center;
}
#odds-tooltip.show { display: flex; }
.tooltip-box {
  background: rgba(13,32,16,0.97);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 1.5rem;
  max-width: 380px;
  width: 90%;
}
.tooltip-title {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.75rem;
  color: var(--gold);
  margin-bottom: 0.75rem;
  letter-spacing: 0.1em;
}
.tooltip-body {
  font-size: 0.88rem;
  line-height: 1.7;
  color: var(--text-dim);
}
.tooltip-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0.4rem 0;
}
.tooltip-swatch {
  width: 12px; height: 12px; border-radius: 2px; flex-shrink: 0;
}
.swatch-perceived { background: #c9a84c; }
.swatch-actual    { background: #1abc9c; }
.swatch-bust      { background: #e74c3c; }
.tooltip-close {
  margin-top: 1rem;
  background: transparent;
  border: 1px solid var(--gold-dim);
  color: var(--text-dim);
  padding: 0.35rem 1rem;
  cursor: pointer;
  border-radius: 4px;
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.6rem;
  letter-spacing: 0.05em;
  transition: all 0.2s;
}
.tooltip-close:hover { color: var(--gold); border-color: var(--gold); }

/* ══════════════════════════════════════════
    LIVE DEBT / COULD-HAVE-BOUGHT PANEL
══════════════════════════════════════════ */
#live-debt-panel {
  background: rgba(5,8,5,0.8);
  border: 1px solid rgba(192,57,43,0.25);
  border-radius: 8px;
  padding: 0.8rem 1rem;
  margin: 0.5rem 0;
  display: none;
}
#live-debt-panel.visible { display: block; }

.ldp-header {
  display: flex;
  align-items: baseline;
  gap: 0.75rem;
  margin-bottom: 0.6rem;
}
.ldp-title {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.55rem;
  letter-spacing: 0.15em;
  color: var(--debt-col);
  opacity: 0.8;
}
.ldp-amount {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 1.35rem;
  color: var(--debt-col);
  transition: all 0.4s;
  line-height: 1;
}
.ldp-amount.pop {
  animation: amountPop 0.35s ease-out;
}
@keyframes amountPop {
  0%   { transform: scale(1); }
  40%  { transform: scale(1.18); }
  100% { transform: scale(1); }
}

.ldp-items {
  display: flex;
  flex-wrap: wrap;
  gap: 0.35rem;
}

.ldp-item {
  background: rgba(201,168,76,0.06);
  border: 1px solid rgba(201,168,76,0.15);
  border-radius: 4px;
  padding: 0.22rem 0.55rem;
  font-size: 0.78rem;
  color: var(--text-dim);
  font-style: italic;
  animation: itemAppear 0.3s ease-out;
}
@keyframes itemAppear {
  from { transform: scale(0.85); opacity: 0; }
  to   { transform: scale(1); opacity: 1; }
}

/* Emphasise biggest item */
.ldp-item.hero {
  background: rgba(201,168,76,0.1);
  border-color: rgba(201,168,76,0.3);
  color: var(--text);
  font-size: 0.85rem;
}

/* No-debt state */
.ldp-ok {
  font-size: 0.82rem;
  font-style: italic;
  color: var(--win-col);
  opacity: 0.7;
}

/* Bigger items list in game-over report */
.buy-item-big {
  background: rgba(201,168,76,0.07);
  border: 1px solid rgba(201,168,76,0.2);
  border-radius: 6px;
  padding: 0.5rem 0.9rem;
  font-size: 0.9rem;
  color: var(--text-dim);
  font-style: italic;
  display: flex;
  align-items: center;
  gap: 0.4rem;
}
.buy-item-big .bi-emoji { font-size: 1.3rem; }
.buy-item-big .bi-qty {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.55rem;
  color: var(--gold);
  opacity: 0.7;
  display: block;
  margin-top: 0.1rem;
}

/* ══════════════════════════════════════════
    NEXT-HAND FORECAST PANEL
══════════════════════════════════════════ */
#next-hand-forecast {
  background: rgba(5,8,5,0.9);
  border: 1px solid rgba(192,57,43,0.35);
  border-radius: 10px;
  padding: 1.2rem 1.4rem;
  max-width: 480px;
  width: 100%;
  margin-top: 0.85rem;
  position: relative;
  overflow: hidden;
}

/* Subtle red vignette to signal "warning" */
#next-hand-forecast::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at 50% 0%, rgba(192,57,43,0.08), transparent 70%);
  pointer-events: none;
}

.nhf-title {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.62rem;
  letter-spacing: 0.15em;
  color: var(--debt-col);
  opacity: 0.85;
  margin-bottom: 1rem;
  text-align: center;
}

/* Big loss-probability display */
.nhf-prob-row {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 0.9rem;
}

.nhf-prob-circle {
  position: relative;
  width: 80px;
  height: 80px;
  flex-shrink: 0;
}

.nhf-prob-circle svg {
  width: 80px;
  height: 80px;
  transform: rotate(-90deg);
}

.nhf-circle-track {
  fill: none;
  stroke: rgba(255,255,255,0.06);
  stroke-width: 7;
}

.nhf-circle-fill {
  fill: none;
  stroke: var(--debt-col);
  stroke-width: 7;
  stroke-linecap: round;
  transition: stroke-dashoffset 0.8s cubic-bezier(0.4,0,0.2,1);
}

.nhf-circle-fill.mid   { stroke: #e67e22; }
.nhf-circle-fill.low   { stroke: #f1c40f; }

.nhf-prob-label {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.nhf-prob-number {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 1.2rem;
  line-height: 1;
  color: var(--debt-col);
  transition: color 0.5s;
}
.nhf-prob-number.mid { color: #e67e22; }
.nhf-prob-number.low { color: #f1c40f; }

.nhf-prob-unit {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.4rem;
  opacity: 0.6;
  letter-spacing: 0.1em;
}

.nhf-prob-text {
  flex: 1;
}

.nhf-prob-headline {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.78rem;
  color: var(--text);
  margin-bottom: 0.35rem;
  line-height: 1.4;
}

.nhf-prob-sub {
  font-size: 0.8rem;
  font-style: italic;
  color: var(--text-dim);
  line-height: 1.5;
}

/* Context bars: Your session vs. statistical baseline */
.nhf-context {
  border-top: 1px solid rgba(255,255,255,0.05);
  padding-top: 0.75rem;
  margin-bottom: 0.85rem;
}

.nhf-context-row {
  display: grid;
  grid-template-columns: 100px 1fr 44px;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.4rem;
}
.nhf-context-row:last-child { margin-bottom: 0; }

.nhf-ctx-lbl {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.43rem;
  letter-spacing: 0.08em;
  color: var(--text-dim);
}

.nhf-bar-track {
  height: 6px;
  background: rgba(255,255,255,0.06);
  border-radius: 3px;
  overflow: hidden;
}

.nhf-bar-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.7s cubic-bezier(0.4,0,0.2,1);
}

.nhf-bar-session  { background: linear-gradient(90deg, #e74c3c, #c0392b); }
.nhf-bar-baseline { background: linear-gradient(90deg, #7f8c8d, #95a5a6); }
.nhf-bar-long     { background: linear-gradient(90deg, #8e44ad, #6c3483); }

.nhf-ctx-val {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.65rem;
  text-align: right;
  color: var(--text-dim);
}

/* Dissuasion message */
.nhf-message {
  background: rgba(192,57,43,0.07);
  border-left: 3px solid rgba(192,57,43,0.5);
  border-radius: 0 5px 5px 0;
  padding: 0.65rem 0.85rem;
  font-size: 0.88rem;
  font-style: italic;
  color: var(--text-dim);
  line-height: 1.6;
  margin-bottom: 0.75rem;
}

.nhf-message strong {
  color: var(--text);
  font-style: normal;
}

/* Walk-away CTA */
.nhf-cta {
  display: flex;
  gap: 0.6rem;
  justify-content: center;
}

.nhf-walk-away {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 0.68rem;
  padding: 0.55rem 1.4rem;
  background: linear-gradient(135deg, rgba(192,57,43,0.15), rgba(192,57,43,0.08));
  border: 1px solid rgba(192,57,43,0.45);
  color: #e8b4af;
  border-radius: 4px;
  cursor: pointer;
  letter-spacing: 0.05em;
  transition: all 0.2s;
  clip-path: polygon(5px 0%, calc(100% - 5px) 0%, 100% 5px, 100% calc(100% - 5px), calc(100% - 5px) 100%, 5px 100%, 0% calc(100% - 5px), 0% 5px);
}
.nhf-walk-away:hover {
  background: rgba(192,57,43,0.25);
  border-color: rgba(192,57,43,0.7);
  color: #ffd5d0;
}

/* Expected-loss projection */
.nhf-projection {
  margin-top: 0.6rem;
  font-size: 0.75rem;
  color: var(--text-dim);
  text-align: center;
  font-style: italic;
  opacity: 0.7;
}
.nhf-projection strong { color: var(--debt-col); font-style: normal; }
