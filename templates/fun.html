<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlackJack Brawl ‚Äî Vegas Dungeon</title>
    <link rel="stylesheet" href="../static/fun-style.css">
</head>
<body>

<!-- Title screen -->
<div id="title-screen" style="display:flex;">
  <div style="font-size:5rem; filter: drop-shadow(0 0 40px rgba(212,160,23,0.6))">A</div>
  <h1>BlackJack<br>BRAWL</h1>
  <p>Enter the dungeon, or continue your last run.</p>
  <div style="display:flex; gap:0.8rem; flex-wrap:wrap; justify-content:center;">
    <button class="big-btn" onclick="startNewRun()">NEW RUN</button>
    <button class="big-btn" id="btn-continue-run" onclick="continueRun()">CONTINUE RUN</button>
  </div>
  <button class="action-btn" id="btn-sound-title" onclick="toggleSound()">SOUND ON</button>
</div>

<!-- GAME SCREEN -->
<div id="game-screen">

  <!-- MONSTER ZONE -->
  <div id="monster-zone">
    <div class="zone-label">‚ñ≤ ENEMY LAIR</div>
    <div id="monster-header">
      <div id="monster-sprite">üëπ</div>
      <div id="monster-info">
        <div id="monster-name">VOID DEALER</div>
        <div id="monster-hp-bar">
          <div class="hp-label">HP: <span id="monster-hp-text">100</span> / <span id="monster-hp-max">100</span></div>
          <div class="bar-track"><div class="bar-fill" id="monster-hp-fill" style="width:100%"></div></div>
        </div>
      </div>
      <div id="monster-score">?</div>
    </div>
    <div class="card-row" id="monster-cards"></div>
  </div>

  <!-- BATTLE LOG -->
  <div id="battle-log-zone">
    <div id="battle-log">
      <div id="battle-log-text">The dungeon trembles... Deal your first card!</div>
    </div>
  </div>

  <!-- JOKER BAR (Balatro style power-ups) -->
  <div id="joker-bar">
    <div class="joker-label">JOKERS</div>
    <div class="joker-card" id="joker-1" onclick="useJoker(1)">
      üÉè<span>FOOL'S LUCK</span>
      <div class="joker-tooltip">Remove your highest card once</div>
    </div>
    <div class="joker-card" id="joker-2" onclick="useJoker(2)">
      üíÄ<span>DEATH DRAW</span>
      <div class="joker-tooltip">Deal 15 damage regardless of score</div>
    </div>
    <div class="joker-card" id="joker-3" onclick="useJoker(3)">
      ‚ö°<span>LIGHTNING</span>
      <div class="joker-tooltip">Double your next hit's damage</div>
    </div>
    <div class="joker-card" id="joker-4" onclick="useJoker(4)">
      üõ°<span>IRON SKIN</span>
      <div class="joker-tooltip">Block next monster attack</div>
    </div>
    <div class="joker-card" id="joker-5" onclick="useJoker(5)">
      üëÅÔ∏è<span>PEEK</span>
      <div class="joker-tooltip">Preview your next 2 draws, then choose whether to Hit</div>
    </div>
    <div class="joker-card" id="joker-6" onclick="useJoker(6)">
      üß≤<span>FORCE DRAW</span>
      <div class="joker-tooltip">After your turn, force the monster to draw 3 extra cards (stacks)</div>
    </div>
  </div>

  <!-- PLAYER ZONE -->
  <div id="player-zone">
    <div id="player-header">
      <div id="player-info">
        <div id="player-name">‚öî CARD DUELIST</div>
        <div id="player-hp-bar">
          <div class="hp-label">HP: <span id="player-hp-text">100</span> / 100</div>
          <div class="bar-track"><div class="bar-fill" id="player-hp-fill" style="width:100%"></div></div>
        </div>
      </div>
      <div id="player-score">0</div>
    </div>
    <div class="card-row" id="player-cards"></div>
    <div id="action-bar">
      <button class="action-btn" id="btn-hit" onclick="playerHit()">üÉè HIT</button>
      <button class="action-btn" id="btn-stand" onclick="playerStand()">üõë STAND</button>
      <button class="action-btn" id="btn-special" onclick="playerSpecial()">
        üí• SPECIAL
        <span id="special-charges">(2 charges left)</span>
      </button>
      <button class="action-btn" id="btn-sound" onclick="toggleSound()">SOUND ON</button>
      <button class="action-btn" id="btn-leave-run" onclick="quitToTitle()">LEAVE RUN</button>
    </div>
  </div>
</div>

<!-- TURN INDICATOR -->
<div id="turn-indicator"></div>

<!-- DAMAGE FLASH -->
<div id="damage-flash"></div>

<!-- GAME OVER -->
<div id="game-over-overlay" style="display:none; flex-direction:column;">
  <div id="game-over-title"></div>
  <div id="game-over-msg" style="font-size:1.2rem; font-style:italic; opacity:0.8;"></div>
  <button class="big-btn" id="btn-endless-from-end" onclick="startEndlessFromGameOver()" style="margin-top:1rem; display:none;">ENDLESS MODE</button>
  <button class="big-btn" onclick="startNewRun()" style="margin-top:1rem;">‚öî PLAY AGAIN</button>
  <button class="big-btn" onclick="returnToMainMenu()" style="margin-top:0.5rem; background:rgba(255,255,255,0.06); border:1px solid rgba(212,160,23,0.3); font-size:0.9rem;">üè† MAIN MENU</button>
</div>

<!-- ENDLESS MODE PROMPT -->
<div id="endless-overlay" style="display:none;">
  <div id="endless-panel">
    <div id="endless-title">ALL BOSSES DEFEATED</div>
    <div id="endless-subtitle">Continue into Endless Mode? Floors continue forever and enemies keep scaling.</div>
    <div id="endless-actions">
      <button class="big-btn" onclick="startEndlessMode()">ENTER ENDLESS</button>
      <button class="action-btn shop-btn" onclick="finishRunNow()">END RUN</button>
    </div>
  </div>
</div>

<!-- PUSH / DOUBLE OR NOTHING -->
<div id="push-overlay" style="display:none;">
  <div id="push-panel">
    <div id="push-title">PUSH</div>
    <div id="push-subtitle">Take the push or risk double-or-nothing.</div>
    <div id="push-actions">
      <button class="big-btn" onclick="choosePushOption('double')">DOUBLE OR NOTHING</button>
      <button class="action-btn shop-btn" onclick="choosePushOption('push')">TAKE PUSH</button>
    </div>
  </div>
</div>

<!-- SHOP -->
<div id="shop-overlay" style="display:none;">
  <div id="shop-panel">
    <div id="shop-title">DUNGEON SHOP</div>
    <div id="shop-subtitle">Spend coins before the next floor.</div>
    <div id="shop-coins-wrap">Coins: <span id="shop-coins">0</span></div>
    <div id="shop-actions">
      <button class="action-btn shop-btn" id="shop-heal-btn" onclick="shopBuy('heal')">HEAL +20 (8)</button>
      <button class="action-btn shop-btn" id="shop-charge-btn" onclick="shopBuy('charge')">SPECIAL +1 (6)</button>
      <button class="action-btn shop-btn" id="shop-refresh-btn" onclick="shopBuy('refresh')">REFRESH JOKERS (7)</button>
      <button class="action-btn shop-btn" id="shop-dmgboost-btn" onclick="shopBuy('damage-boost')">DAMAGE BOOST +20% (50)</button>
      <button class="action-btn shop-btn" id="shop-joker-btn" onclick="shopBuy('joker')">RANDOM JOKER (10)</button>
    </div>
    <button class="big-btn" onclick="leaveShop()" style="margin-top:1rem;">CONTINUE</button>
  </div>
</div>

    <script src="../static/fun-ui.js" defer></script>
    <script src="../static/fun-features.js" defer></script>
    <script src="../static/fun-game.js" defer></script>
    <script>document.addEventListener("DOMContentLoaded", function() { window.addEventListener("load", function() { if (typeof initTitleScreen === "function") initTitleScreen(); }); });</script>
</body>
</html>

