<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Realistic Blackjack ‚Äî BlackJack Brawl</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700;900&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../static/realistic-style.css">
</head>
<body>

<!-- ANTI-GAMBLING HUD -->
<div id="ag-hud">
  <div class="ag-block">
    <span class="ag-lbl">SESSION</span>
    <span class="ag-val" id="hud-timer">00:00</span>
  </div>
  <div class="ag-block">
    <span class="ag-lbl">NET P/L</span>
    <span class="ag-val" id="hud-debt">$0</span>
  </div>
  <div class="ag-block">
    <span class="ag-lbl">WIN RATE</span>
    <span class="ag-val" id="hud-winrate">‚Äî</span>
  </div>
  <div class="ag-block">
    <span class="ag-lbl">HANDS</span>
    <span class="ag-val" id="hud-hands">0</span>
  </div>
  <div class="ag-block" title="The statistical advantage the house holds over the player in standard blackjack">
    <span class="ag-lbl">HOUSE EDGE</span>
    <span class="ag-val hud-house">~0.5%</span>
  </div>
</div>

<!-- STREAK / TIME BANNERS -->
<div id="banner-streak" class="ag-banner streak">
  ‚ö†Ô∏è <strong>3 losses in a row.</strong> Chasing losses is the most common gambling trap ‚Äî the odds don't change.
</div>
<div id="banner-time" class="ag-banner time-warn">
  ‚è± You've been playing for 30 minutes. Studies show risk tolerance increases with session length. Consider a break.
</div>

<!-- MAIN GAME -->
<div id="game-wrap">
  <div style="display:flex; align-items:center; justify-content:space-between; padding-top:1rem;">
    <button class="btn btn-back" onclick="window.location.href='index.html'">‚Üê MAIN MENU</button>
    <span style="font-family:'Cinzel Decorative',cursive; font-size:0.7rem; color:var(--text-dim); letter-spacing:0.1em;">REALISTIC BLACKJACK</span>
    <div style="width:90px"></div>
  </div>

  <!-- DEALER -->
  <div id="dealer-zone">
    <div class="zone-label">‚ñ≤ DEALER</div>
    <div class="hand-score" id="dealer-score">‚Äî</div>
    <div class="card-row" id="dealer-cards"></div>
  </div>

  <hr id="table-divider">

  <!-- MESSAGE -->
  <div id="msg-box">Place your bet and deal to begin.</div>


  <!-- ODDS TRACKER -->
  <div id="odds-panel">
    <div class="odds-header">
      <span class="odds-title">üé≤ ODDS TRACKER</span>
      <button class="odds-info-btn" onclick="document.getElementById('odds-tooltip').classList.add('show')" title="How is this calculated?">?</button>
    </div>
    <div class="odds-row">
      <span class="odds-lbl">YOU FEEL</span>
      <div class="odds-bar-track"><div class="odds-bar-fill bar-perceived" id="bar-perceived" style="width:0%"></div></div>
      <span class="odds-pct pct-perceived" id="pct-perceived">‚Äî</span>
    </div>
    <div class="odds-row">
      <span class="odds-lbl">ACTUAL WIN %</span>
      <div class="odds-bar-track"><div class="odds-bar-fill bar-actual" id="bar-actual" style="width:0%"></div></div>
      <span class="odds-pct pct-actual" id="pct-actual">‚Äî</span>
    </div>
    <div class="odds-row">
      <span class="odds-lbl">BUST RISK</span>
      <div class="odds-bar-track"><div class="odds-bar-fill bar-bust" id="bar-bust" style="width:0%"></div></div>
      <span class="odds-pct pct-bust" id="pct-bust">‚Äî</span>
    </div>
    <div class="odds-gap" id="odds-gap"></div>
  </div>

  <!-- LIVE DEBT / COULD-HAVE-BOUGHT -->
  <div id="live-debt-panel">
    <div class="ldp-header">
      <span class="ldp-title">TOTAL LOST</span>
      <span class="ldp-amount" id="ldp-amount">$0</span>
    </div>
    <div class="ldp-items" id="ldp-items"></div>
  </div>

  <!-- PLAYER -->
  <div id="player-zone">
    <div class="zone-label">‚ñº YOUR HAND</div>
    <div class="hand-score" id="player-score">‚Äî</div>
    <div class="card-row" id="player-cards"></div>

    <!-- CHIPS + BET -->
    <div id="bet-row">
      <div class="balance-display">BALANCE <span id="balance-display">$500</span></div>
      <button class="chip chip-1"   onclick="addBet(1)"   id="chip1">$1</button>
      <button class="chip chip-5"   onclick="addBet(5)"   id="chip5">$5</button>
      <button class="chip chip-25"  onclick="addBet(25)"  id="chip25">$25</button>
      <button class="chip chip-100" onclick="addBet(100)" id="chip100">$100</button>
      <button class="chip chip-500" onclick="addBet(500)" id="chip500">$500</button>
      <div id="current-bet-display">BET <span id="bet-display">$0</span></div>
    </div>

    <!-- ACTIONS -->
    <div id="action-row">
      <button class="btn btn-clear" id="btn-clear" onclick="clearBet()">CLEAR</button>
      <button class="btn btn-deal"  id="btn-deal"  onclick="deal()">DEAL</button>
      <button class="btn btn-hit"   id="btn-hit"   onclick="hit()"    disabled>HIT</button>
      <button class="btn btn-stand" id="btn-stand" onclick="stand()"  disabled>STAND</button>
      <button class="btn btn-double"id="btn-double"onclick="doubleDown()" disabled>DOUBLE</button>
    </div>
  </div>
</div>

<!-- FLASH -->
<div id="flash"></div>

<!-- WIN NUDGE -->
<div id="win-nudge">
  <div class="nudge-box">
    <div style="font-size:2rem">üèÜ</div>
    <div class="nudge-title">You're running hot!</div>
    <div class="nudge-body">
      A winning streak feels powerful ‚Äî but the house edge never changes.<br>
      This is statistically one of the best moments to walk away.
    </div>
    <button class="nudge-dismiss" onclick="document.getElementById('win-nudge').classList.remove('show')">
      KEEP PLAYING ANYWAY
    </button>
  </div>
</div>

<!-- GAME OVER / BUST OVERLAY (hand result) ‚Äî reused each hand -->
<div id="gameover">
  <div id="go-title"></div>
  <div id="go-subtitle" style="font-style:italic; opacity:0.7; margin-top:0.3rem; font-size:1rem;"></div>

  <div id="report">
    <div class="report-title">üìä SESSION REALITY CHECK</div>
    <div class="report-grid">
      <div class="r-stat">
        <div class="r-stat-lbl">TIME PLAYED</div>
        <div class="r-stat-val" id="r-time">‚Äî</div>
      </div>
      <div class="r-stat">
        <div class="r-stat-lbl">HANDS PLAYED</div>
        <div class="r-stat-val" id="r-hands">‚Äî</div>
      </div>
      <div class="r-stat">
        <div class="r-stat-lbl">HANDS WON</div>
        <div class="r-stat-val" id="r-wins">‚Äî</div>
      </div>
      <div class="r-stat">
        <div class="r-stat-lbl">WIN RATE</div>
        <div class="r-stat-val" id="r-winrate">‚Äî</div>
      </div>
    </div>

    <div class="debt-box" id="r-debt-box">
      <div class="debt-box-lbl" id="r-debt-lbl">NET LOSS THIS SESSION</div>
      <div class="debt-box-amount" id="r-debt-amount">$0</div>
    </div>

    <div class="could-buy" id="r-couldbuy" style="display:none">
      <div class="could-buy-title">üõí INSTEAD, YOU COULD HAVE BOUGHT...</div>
      <div class="buy-list" id="r-buy-list"></div>
    </div>

    <div class="report-reminder">
      The house edge in blackjack is ~0.5% with perfect basic strategy ‚Äî most players lose more than that.
      No streak, hot shoe, or intuition changes the math.
      <a class="helpline" href="https://www.ncpgambling.org/help-treatment/national-helpline-1-800-522-4700/" target="_blank">
        üÜò National Problem Gambling Helpline: 1-800-522-4700
      </a>
    </div>
  </div>


  <!-- NEXT-HAND FORECAST -->
  <div id="next-hand-forecast">
    <div class="nhf-title">üìâ NEXT HAND FORECAST</div>

    <div class="nhf-prob-row">
      <div class="nhf-prob-circle">
        <svg viewBox="0 0 80 80">
          <circle class="nhf-circle-track" cx="40" cy="40" r="33"/>
          <circle class="nhf-circle-fill" id="nhf-circle-fill" cx="40" cy="40" r="33"
            stroke-dasharray="207.3"
            stroke-dashoffset="207.3"/>
        </svg>
        <div class="nhf-prob-label">
          <span class="nhf-prob-number" id="nhf-prob-number">‚Äî</span>
          <span class="nhf-prob-unit">LOSE %</span>
        </div>
      </div>
      <div class="nhf-prob-text">
        <div class="nhf-prob-headline" id="nhf-headline">Calculating odds‚Ä¶</div>
        <div class="nhf-prob-sub" id="nhf-sub"></div>
      </div>
    </div>

    <div class="nhf-context">
      <div class="nhf-context-row">
        <span class="nhf-ctx-lbl">YOUR SESSION</span>
        <div class="nhf-bar-track"><div class="nhf-bar-fill nhf-bar-session" id="nhf-bar-session" style="width:0%"></div></div>
        <span class="nhf-ctx-val" id="nhf-val-session">‚Äî</span>
      </div>
      <div class="nhf-context-row">
        <span class="nhf-ctx-lbl">STATISTICAL BASE</span>
        <div class="nhf-bar-track"><div class="nhf-bar-fill nhf-bar-baseline" style="width:49%"></div></div>
        <span class="nhf-ctx-val">49%</span>
      </div>
      <div class="nhf-context-row">
        <span class="nhf-ctx-lbl">LONG-RUN (1000 hands)</span>
        <div class="nhf-bar-track"><div class="nhf-bar-fill nhf-bar-long" style="width:55%"></div></div>
        <span class="nhf-ctx-val">55%</span>
      </div>
    </div>

    <div class="nhf-message" id="nhf-message"></div>

    <div class="nhf-cta">
      <button class="nhf-walk-away" onclick="window.location.href='index.html'">üö™ WALK AWAY NOW</button>
    </div>

    <div class="nhf-projection" id="nhf-projection"></div>
  </div>

  <div class="go-btns">
    <button class="btn-lg btn-lg-gold"  onclick="newHand()">DEAL AGAIN</button>
    <button class="btn-lg btn-lg-muted" onclick="window.location.href='index.html'">MAIN MENU</button>
  </div>
</div>

<!-- Link js file -->
<script src="static/realistic-main.js" defer></script>

<!-- ODDS TOOLTIP -->
<div id="odds-tooltip">
  <div class="tooltip-box">
    <div class="tooltip-title">HOW THE ODDS TRACKER WORKS</div>
    <div class="tooltip-body">
      <div class="tooltip-row"><div class="tooltip-swatch swatch-perceived"></div><strong style="color:var(--gold)">You Feel (amber)</strong></div>
      <p>A model of how confident most players feel at this score. People over-estimate their chances when they have a "good" total like 18 or 19, and underestimate when they hold 12‚Äì16.</p>
      <br>
      <div class="tooltip-row"><div class="tooltip-swatch swatch-actual"></div><strong style="color:#1abc9c">Actual Win % (green)</strong></div>
      <p>Calculated from basic strategy tables: given your total and the dealer's visible card, what percentage of hands statistically result in a win from this position.</p>
      <br>
      <div class="tooltip-row"><div class="tooltip-swatch swatch-bust"></div><strong style="color:var(--debt-col)">Bust Risk (red)</strong></div>
      <p>The probability that taking one more card (Hit) would put you over 21, based on your current total and how many high cards remain playable.</p>
      <br>
      <p style="opacity:0.6; font-size:0.82rem;">The gap between amber and green reveals a key gambling bias: most players consistently feel luckier than the math supports.</p>
    </div>
    <button class="tooltip-close" onclick="document.getElementById('odds-tooltip').classList.remove('show')">GOT IT</button>
  </div>
</div>
</body>
</html>